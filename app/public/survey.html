<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Friend Finder</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../public/css/style.css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />

  </head>
  <body>
<!--*****************************************************************-->    
<style>
.body {
  background: #e4ebf1;
}
#userImg, 
#matchImg {
   width: 200;
}

/* Survey - Custom radio buttons */

/*
.radio-inline {
  margin-left: 17px; 
  width: 75px;
}
*/

.radio-inline {
  text-align: center; 
 /* margin-right: 3px; */
  width: 85px; 
}

.button-heading {
    text-align: center;
    margin-left: 10px;
    font-size: 12px;
}

.survey-list {
    text-align: center;
    font-size: 12px;
}

.odd-question {
    background-color:lavender;
    line-height: 18px;
}
.even-question {
    background-color:rgb(170, 170, 173);
    line-height: 18px;
}
</style>
<!--*****************************************************************-->    

    <div class="container" id="surveyPage">

      <!-- Page Heading -->
      <div class="row">
        <div class="col" style="text-align: center">
          <h3>Tell Us About You - Questionnaire</h3>
          <hr />
        </div>
      </div>

      <!-- input forms for Name and Link to Photo -->
      <form class="was-validated">
        <div class="form-group">
          <label for="name">Name:</label>
          <input type="text" class="form-control" id="name" placeholder="Enter your name (required)" name="name" required>
          <!-- <div class="valid-feedback">Valid.</div> -->
<!--          <div class="invalid-feedback">Please fill out this field.</div> -->
        </div>
        <div class="form-group">
          <label for="photo">Link to Photo:</label>
          <input type="url" class="form-control" id="photo" placeholder="Enter link to your photo (required)" name="photo" required>
          <!-- <div class="valid-feedback">Valid.</div> -->
          <!-- <div class="invalid-feedback">Please fill out this field.</div> --> 
        </div>
      </form>

      <!------------------------- Survey radio buttons ------------------------->
      <div class="row" style="text-align: center">
         <div class="col">
            <hr />
            <h5>Please select your answers on a scale where 5 = Strongly Agree and 1 = Strongly Disagree</h5>
         </div>
      </div>
      <br>

      <!--  Radio Button headings -->
      <div class="row button-heading" >
          <div class="col-lg-7"></div>
          <div class="col-lg-1">Strongly</div>
          <div class="col-lg-1">Somewhat</div>
          <div class="col-lg-1">Neutral</div>
          <div class="col-lg-1">Somewhat</div>
          <div class="col-lg-1">Strongly</div>
      </div>
      <div class="row button-heading">
          <div class="col-lg-7"></div>
          <div class="col-lg-1">Agree</div>
          <div class="col-lg-1">Agree</div>
          <div class="col-lg-1"> </div>
          <div class="col-lg-1">Disagree</div>
          <div class="col-lg-1">Disagree</div>
      </div>

      <!-- Question List-->
                    
      <div class="row odd-question">
          <div class="col-lg-7" >
              <p class="question">Q1. Your mind is always buzzing with unexplored ideas and plans.</p>
          </div>
          <div class="col-lg-5" >    
              <form class="chosen-select" id="q1">
                  <label class="radio-inline "><input type="radio" name="q1" value=5> 5</label>
                  <label class="radio-inline "><input type="radio" name="q1" value=4> 4</label>
                  <label class="radio-inline "><input type="radio" name="q1" value=3> 3</label>
                  <label class="radio-inline "><input type="radio" name="q1" value=2> 2</label>
                  <label class="radio-inline "><input type="radio" name="q1" value=1> 1</label>
              </form>
          </div>
      </div>
      <div class="row even-question">
          <div class="col-lg-7" >
              <p class="question">Q2. Generally speaking, you rely more on your experience than your imagination.</p>
          </div>
          <div class="col-lg-5" >    
              <form class="chosen-select" id="q2">
                  <label class="radio-inline"><input type="radio" name="q2" value=5> 5 </label>
                  <label class="radio-inline"><input type="radio" name="q2" value=4> 4 </label>
                  <label class="radio-inline"><input type="radio" name="q2" value=3> 3 </label>
                  <label class="radio-inline"><input type="radio" name="q2" value=2> 2 </label>
                  <label class="radio-inline"><input type="radio" name="q2" value=1> 1 </label>
              </form>
          </div>
      </div>
      <div class="row odd-question">
          <div class="col-lg-7" >
              <p class="question">Q3. You find it easy to stay relaxed and focused even when there is some pressure.</p>
          </div>
          <div class="col-lg-5" >    
              <form class="chosen-select" id="q3">
                  <label class="radio-inline"><input type="radio" name="q3" value=5> 5 </label>
                  <label class="radio-inline"><input type="radio" name="q3" value=4> 4 </label>
                  <label class="radio-inline"><input type="radio" name="q3" value=3> 3 </label>
                  <label class="radio-inline"><input type="radio" name="q3" value=2> 2 </label>
                  <label class="radio-inline"><input type="radio" name="q3" value=1> 1 </label>
              </form>
          </div>
      </div>
      <div class="row even-question">
          <div class="col-lg-7" >
              <p class="question">Q4. You rarely do something just out of sheer curiosity.</p>
          </div>
          <div class="col-lg-5" >    
              <form class="chosen-select" id="q4">
                  <label class="radio-inline"><input type="radio" name="q4" value=5> 5 </label>
                  <label class="radio-inline"><input type="radio" name="q4" value=4> 4 </label>
                  <label class="radio-inline"><input type="radio" name="q4" value=3> 3 </label>
                  <label class="radio-inline"><input type="radio" name="q4" value=2> 2 </label>
                  <label class="radio-inline"><input type="radio" name="q4" value=1> 1 </label>
              </form>
          </div>
      </div>
      <div class="row odd-question">
          <div class="col-lg-7" >
              <p class="question">Q5. People can rarely upset you.</p>
          </div>
          <div class="col-lg-5" >    
              <form class="chosen-select" id="q5">
                  <label class="radio-inline"><input type="radio" name="q5" value=5> 5 </label>
                  <label class="radio-inline"><input type="radio" name="q5" value=4> 4 </label>
                  <label class="radio-inline"><input type="radio" name="q5" value=3> 3 </label>
                  <label class="radio-inline"><input type="radio" name="q5" value=2> 2 </label>
                  <label class="radio-inline"><input type="radio" name="q5" value=1> 1 </label>
              </form>
          </div>
      </div>
      <div class="row even-question">
          <div class="col-lg-7" >
              <p class="question">Q6. It is often difficult for you to relate to other people’s feelings.</p>
          </div>
          <div class="col-lg-5" >    
              <form class="chosen-select" id="q6">
                  <label class="radio-inline"><input type="radio" name="q6" value=5> 5 </label>
                  <label class="radio-inline"><input type="radio" name="q6" value=4> 4 </label>
                  <label class="radio-inline"><input type="radio" name="q6" value=3> 3 </label>
                  <label class="radio-inline"><input type="radio" name="q6" value=2> 2 </label>
                  <label class="radio-inline"><input type="radio" name="q6" value=1> 1 </label>
              </form>
          </div>
      </div>
      <div class="row odd-question">
          <div class="col-lg-7" >
              <p class="question">Q7. In a discussion, truth should be more important than people’s sensitivities.</p>
          </div>
          <div class="col-lg-5" >    
              <form class="chosen-select" id="q7">
                  <label class="radio-inline"><input type="radio" name="q7" value=5> 5 </label>
                  <label class="radio-inline"><input type="radio" name="q7" value=4> 4 </label>
                  <label class="radio-inline"><input type="radio" name="q7" value=3> 3 </label>
                  <label class="radio-inline"><input type="radio" name="q7" value=2> 2 </label>
                  <label class="radio-inline"><input type="radio" name="q7" value=1> 1 </label>
              </form>
          </div>
      </div>
      <div class="row even-question">
          <div class="col-lg-7" >
              <p class="question">Q8. You rarely get carried away by fantasies and ideas.</p>
          </div>
          <div class="col-lg-5" >    
              <form class="chosen-select" id="q8">
                  <label class="radio-inline"><input type="radio" name="q8" value=5> 5 </label>
                  <label class="radio-inline"><input type="radio" name="q8" value=4> 4 </label>
                  <label class="radio-inline"><input type="radio" name="q8" value=3> 3 </label>
                  <label class="radio-inline"><input type="radio" name="q8" value=2> 2 </label>
                  <label class="radio-inline"><input type="radio" name="q8" value=1> 1 </label>
              </form>
          </div>
      </div>
      <div class="row odd-question">
              <div class="col-lg-7" >
                  <p class="question">Q9. You think a person’s views should be respectd even if not supported by facts.</p>
              </div>
              <div class="col-lg-5" >    
                  <form class="chosen-select" id="q9">
                      <label class="radio-inline"><input type="radio" name="q9" value=5> 5 </label>
                      <label class="radio-inline"><input type="radio" name="q9" value=4> 4 </label>
                      <label class="radio-inline"><input type="radio" name="q9" value=3> 3 </label>
                      <label class="radio-inline"><input type="radio" name="q9" value=2> 2 </label>
                      <label class="radio-inline"><input type="radio" name="q9" value=1> 1 </label>
                  </form>
              </div>
      </div>
      <div class="row even-question">
          <div class="col-lg-7" >
              <p class="question">Q10. You feel more energetic after spending time with a group of people.</p>
          </div>
          <div class="col-lg-5" >    
              <form class="chosen-select" id="q10">
                  <label class="radio-inline"><input type="radio" name="q10" value=5> 5 </label>
                  <label class="radio-inline"><input type="radio" name="q10" value=4> 4 </label>
                  <label class="radio-inline"><input type="radio" name="q10" value=3> 3 </label>
                  <label class="radio-inline"><input type="radio" name="q10" value=2> 2 </label>
                  <label class="radio-inline"><input type="radio" name="q10" value=1> 1 </label>
              </form>
          </div>
      </div>
      <br />
      <button type="submit" class="btn btn-primary" id="submit">
        <i class="fa fa-check-circle" aria-hidden="true"></i> Submit
      </button>
      <br />

      <footer class="footer text-center">
        <div class="container">
          <p>
              <a href="/api/friends">More Friends</a> |
              <a href="/">Home</a> |
              <a href="#">GitHub Repo</a> 
            <br />
          </p>
        </div>
      </footer>
    </div>

    <!-------   Modal Box -->
    <div id="resultsModal" class="modal fade" role="dialog">

      <div class="modal-dialog modal-lg">

        <div class="modal-content" id=modalBox>

          <div class="modal-header">
<!--            <button type="button" class="close" data-dismiss="modal"> &times; </button>  -->
            <h2 class="modal-title" id="modal-title"><strong>New Best Friends</strong></h2>
          </div>

          <div class="modal-body">
              <div class="row even-question">
                  <div class="col-lg-6" >
                      <h2 id="userName"></h2>
                      <img id="userImg" style="width:200px"
                        src="https://via.placeholder.com/200x200"
                        alt="Placeholder image in case user pic doesn't show"/>

                  </div>
                  <div class="col-lg-6" >
                      <h2 id="matchName"></h2>
                      <img id="matchImg" style="width:200px"
                        src="https://via.placeholder.com/200x200"
                        alt="Placeholder image in case user pic doesn't show"/>
                  </div>
              </div>
         
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal"> Close </button>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      var debugON = true;
      var userData;

      $("#submit").on("click", function() {         
        function validateForm() {
          // Get the data
          userData = {
            name: $("#name").val(),
            photo: $("#photo").val(),
            scores: [
              $("input[name='q1']:checked").val(),
              $("input[name='q2']:checked").val(),
              $("input[name='q3']:checked").val(),
              $("input[name='q4']:checked").val(),
              $("input[name='q5']:checked").val(),
              $("input[name='q6']:checked").val(),
              $("input[name='q7']:checked").val(),
              $("input[name='q8']:checked").val(),
              $("input[name='q9']:checked").val(),
              $("input[name='q10']:checked").val()
            ]
          };
  
          if (debugON) {
            console.log ("In validateForm()");
            console.log ("Input User Data ", userData);
          }
               
          var isValid = true;
          // validate the name field
          if ((userData.name === "") || (userData.name === undefined))
            isValid = false;

          // validate the photo field
          if ((userData.photo === "") || (userData.name === undefined)) 
            isValid = false;
                    
          // check that all survey questions have been answered
          $.each(userData.scores, function( index, value ) {
            if ((value === "") || (value === undefined))
                isValid = false;
            if (debugON) console.log("Q " + (index+1) + " : " + value);
          });  //  $.each(userData.scores, function( index, value )

          return isValid;
        }  //function validateForm()

        if (validateForm() == true) {
          if (debugON) console.log ("after call validateForm() data is valid ", userData);
     
          var currentURL = window.location.origin;
/*
          $("#resultsModal").modal("toggle");  // pop up the modal
          $("#userName").text(userData.name);
          $("#userImg").attr("src", userData.photo);
          $("#matchName").text(userData.name);
          $("#matchImg").attr("src", userData.photo);
*/

          // Add/post the input new user data to the friend list  
          // and receive back the best match for the new user
          $.post(currentURL + "/api/friends", userData, function(matchData) {
            $("#userName").text(userData.name);
            $("#userImg").attr("src", userData.photo);
            $("#matchName").text(matchData.name);
            $("#matchImg").attr("src", matchData.photo);

            // User modal to display the matching pair
            $("#resultsModal").modal("toggle");  
          });   
         
        } else {
          alert("Please fill out all fields before submitting!");
        }
        return false;
      });  //  $("#submit").on("click", function()

    </script>
  </body>
</html>